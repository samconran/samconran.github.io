<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Alannah's Grade Calculator</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <script src="http://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.11/handlebars.min.js" charset="utf-8"></script>
    <script src="main.js" charset="utf-8"></script>
  </head>
  <body hidden>
    <h2 id="title" class="text-center">The 'Alannah Moon' Grade Calculator</h2>

    <div class="row" id="content">
      <div id="module-container" class="container-fluid mb-3 mt-3 col-12 col-lg-6">
        <!-- HANDLEBARS -->
      </div>

      <div id="results-container" class="col-12 col-lg-6">
        <!-- HANDLEBARS -->
      </div>
    </div>

    <div class="modal fade" id="addModule" tabindex="-1" role="dialog" aria-labelledby="addModuleTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="addModuleTitle">Add Module</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div id="addModuleForm" class="modal-body">
            <!-- HANDLEBARS -->
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" id="save-module">Save changes</button>
          </div>
        </div>
      </div>
      </div>

    <script id="modules" type="text/x-handlebars-template">
      <h3>Modules</h3>
      <div class="accordion mb-3" id="accordion">
        {{#each modules}}
        <div class="card module grades">
          <div class="card-header" id="heading-{{id}}">
            <h5 class="mb-0">
              <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapse-{{id}}" aria-expanded="true" aria-controls="collapse-{{id}}">{{@key}}</button>
            </h5>
          </div>

          <div id="collapse-{{id}}" class="collapse" aria-labelledby="heading-{{id}}" data-parent="#accordion">
            <div class="card-body">
              <h5>Current Marks</h5>
              <table class="table table-hover">
                <tbody>
                  <tr>
                    <th scope="row">Score</th>
                    <td>{{current.score}}</td>
                  </tr>
                  <tr>
                    <th scope="row">Module Worth</th>
                    <td>{{current.worth}}</td>
                  </tr>
                </tbody>
              </table>
              <div class="mt-2">
                <button type="button" class="btn btn-outline-danger deleteModule">Remove Module</button>
              </div>
            </div>
          </div>
        </div>
        {{/each}}
        <div class="card-header text-center" id="heading-add">
          <h5 class="mb-0"><button class="btn btn-outline-primary addModuleBtn" type="button">ADD MODULE</button></h5>
        </div>
      </div>

      <div class="text-center">
        <button type="button" class="btn btn-success" id="getResults">Calculate Needed Grades</button>
      </div>
    </script>

    <script id="add-module" type="text/x-handlebars-template">
      <div class="form-group">
        <label for="moduleTitle">Module Title</label>
        <input type="text" class="form-control" id="moduleTitle" placeholder="Enter Module Title" value="">
      </div>
      <h6>Current Marks</h6>
        <div class="form-row">
          <div class="col">
            <div class="form-group">
              <label for="moduleTitle">Marks</label>
              <input type="text" class="form-control" id="currentMarks" placeholder="Your Marks" value="">
            </div>
          </div>
          <div class="col">
            <div class="form-group">
              <label for="moduleTitle">Worth</label>
              <input type="text" class="form-control" id="currentWorth" placeholder="% of the module" value="">
            </div>
          </div>
        </div>
    </script>

    <script id="results" type="text/x-handlebars-template">

      <table class="table table-striped">
        <tbody>
          {{#each this}}
            <tr class="table-info">
              <th colspan="2" class="text-center">{{@key}}</th>
            </tr>
            <tr>
              <th scope="row">Current Marks</th>
              <td>{{current}}</td>
            </tr>
            {{#each needed}}
              <tr>
                <th scope="row">{{@key}}</th>
                <td class="{{#ifPassed this}}table-success{{/ifPassed}} {{#ifImpossible this}}table-danger{{/ifImpossible}} text-center">{{this}}</td>
              </tr>
            {{/each}}
          {{/each}}
        </tbody>
      </table>
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
  </body>
</html>
